(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{20:function(t,e,o){},23:function(t,e,o){"use strict";o.r(e);var n=o(3),a=o.n(n),c=o(12),i=o.n(c),s=(o(20),o(1)),r=o(14),p=o(11),l=o(10),u=o.n(l),h=o(13),d=o(15),O=o(5),j=function(t,e){if("GET_PHOTOS_BEGINS"===e.type)return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0});if("GET_PHOTOS_SUCCESS"===e.type){var o,n=t.query,a=t.page;return n&&(o=e.payload.results.filter((function(e){return!t.photos.some((function(t){return t.id===e.id}))}))),n&&1===a?(console.log(o),Object(s.a)(Object(s.a)({},t),{},{all_photos:o,photos:o,isLoading:!1})):n?(console.log(o),Object(s.a)(Object(s.a)({},t),{},{all_photos:[].concat(Object(O.a)(t.photos),Object(O.a)(o)),photos:[].concat(Object(O.a)(t.photos),Object(O.a)(o)),isLoading:!1})):(o=e.payload.filter((function(e){return!t.photos.some((function(t){return t.id===e.id}))})),Object(s.a)(Object(s.a)({},t),{},{all_photos:[].concat(Object(O.a)(t.photos),Object(O.a)(o)),photos:[].concat(Object(O.a)(t.photos),Object(O.a)(o)),isLoading:!1}))}if("GET_PHOTOS_ERROR"===e.type)return console.log(e.payload),Object(s.a)(Object(s.a)({},t),{},{isLoading:!1});if("UPDATE_PAGE"===e.type)return!t.isLikedFilterOn&&!t.isLoading&&window.innerHeight+window.scrollY>=document.body.scrollHeight-2?Object(s.a)(Object(s.a)({},t),{},{page:t.page+1}):Object(s.a)({},t);if("UPDATE_QUERY"===e.type)return Object(s.a)(Object(s.a)({},t),{},{query:e.payload});if("SET_PAGE"===e.type)return Object(s.a)(Object(s.a)({},t),{},{page:1,isLikedFilterOn:!1});if("TOGGLE_LIKE"===e.type){var c,i=e.payload,r=function(){return t.all_photos.map((function(t){return t.id===i&&(t.liked_by_user=!t.liked_by_user,c=t),t}))};if(t.liked_photos.some((function(t){return t.id===i}))){var p=t.liked_photos.filter((function(t){return t.id!==i})),l=r();return t.isLikedFilterOn?Object(s.a)(Object(s.a)({},t),{},{all_photos:l,liked_photos:p,photos:p}):Object(s.a)(Object(s.a)({},t),{},{all_photos:l,liked_photos:p,photos:l})}var u=r();return Object(s.a)(Object(s.a)({},t),{},{all_photos:u,liked_photos:[].concat(Object(O.a)(t.liked_photos),[c]),photos:u})}if("TOGGLE_LIKED_FILTER"===e.type)return t.isLikedFilterOn?Object(s.a)(Object(s.a)({},t),{},{isLikedFilterOn:!t.isLikedFilterOn,photos:t.all_photos}):Object(s.a)(Object(s.a)({},t),{},{isLikedFilterOn:!t.isLikedFilterOn,photos:t.liked_photos});throw new Error("no matching action type")},_="?client_id=".concat("4IEJj8E_8Fc7m7iJonOFKZpivFk89aBL6tJ4gtG0vJU"),b=o(2),f=a.a.createContext(),m={isLoading:!1,all_photos:[],photos:[],liked_photos:[],page:1,query:"",isLikedFilterOn:!1},y=function(t){var e=t.children,o=Object(n.useReducer)(j,m),a=Object(d.a)(o,2),c=a[0],i=a[1],r=c.page,p=c.query,l=function(){var t=Object(h.a)(u.a.mark((function t(){var e,o,n,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:"GET_PHOTOS_BEGINS"}),o="&page=".concat(r),n="&query=".concat(p),e=p?"".concat("https://api.unsplash.com/search/photos/").concat(_).concat(o).concat(n):"".concat("https://api.unsplash.com/photos/").concat(_).concat(o),t.prev=4,t.next=7,fetch(e);case 7:return a=t.sent,t.next=10,a.json();case 10:c=t.sent,i({type:"GET_PHOTOS_SUCCESS",payload:c}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),i({type:"GET_PHOTOS_ERROR",payload:t.t0});case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){l()}),[r]);var O=function(){i({type:"UPDATE_PAGE"})};return Object(n.useEffect)((function(){return window.addEventListener("scroll",O),function(){window.removeEventListener("scroll",O)}}),[]),Object(b.jsx)(f.Provider,{value:Object(s.a)(Object(s.a)({},c),{},{updatePage:O,handleChange:function(t){i({type:"UPDATE_QUERY",payload:t.target.value})},handleSubmit:function(t){t.preventDefault(),i({type:"SET_PAGE"}),l()},handleLike:function(t){i({type:"TOGGLE_LIKE",payload:t})},handleLikedFilter:function(){i({type:"TOGGLE_LIKED_FILTER"})}}),children:e})},E=function(){return Object(n.useContext)(f)},g=o(7),L=o.n(g),k=function(t){var e=t.id,o=t.urls.regular,n=t.alt_description,a=t.liked_by_user,c=t.user,i=c.name,s=c.portfolio_url,r=c.profile_image.medium,l=E().handleLike,u={fontSize:"2rem"};return Object(b.jsxs)("article",{className:L.a.photo,children:[Object(b.jsx)("img",{src:o,alt:n}),Object(b.jsxs)("div",{className:L.a.photoInfo,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:i}),Object(b.jsx)("a",{href:s,children:Object(b.jsx)("img",{src:r,alt:i,className:L.a.userImg})})]}),Object(b.jsx)("button",{onClick:function(){return l(e)},className:L.a.btn_icon,children:a?Object(b.jsx)(p.a,{style:u}):Object(b.jsx)(p.b,{style:u})})]})]})},v=o(4),x=o.n(v);var T=function(){var t=E(),e=t.photos,o=t.isLoading,n=t.query,a=t.handleChange,c=t.handleSubmit,i=t.handleLikedFilter,p=t.isLikedFilterOn;return Object(b.jsxs)("main",{children:[Object(b.jsxs)("section",{className:x.a.search,children:[Object(b.jsxs)("form",{className:x.a.searchForm,children:[Object(b.jsx)("input",{type:"text",placeholder:"\u043f\u043e\u0438\u0441\u043a",className:x.a.formInput,value:n,onChange:a}),Object(b.jsx)("button",{type:"submit",className:x.a.submitBtn,onClick:c,children:Object(b.jsx)(r.a,{})})]}),Object(b.jsx)("button",{onClick:i,className:x.a.btnFilter,id:p?x.a.active:void 0,children:"\u041c\u043e\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f"})]}),Object(b.jsxs)("section",{className:x.a.photos,children:[Object(b.jsx)("div",{className:x.a.photosCenter,children:e.map((function(t){return Object(b.jsx)(k,Object(s.a)({},t),t.id)}))}),o&&Object(b.jsx)("h2",{className:x.a.loading,children:"Loading..."})]})]})};i.a.render(Object(b.jsx)(y,{children:Object(b.jsx)(T,{})}),document.getElementById("root"))},4:function(t,e,o){t.exports={search:"App_search__268Ay",searchForm:"App_searchForm__2qUzJ",formInput:"App_formInput__2fs6k",submitBtn:"App_submitBtn__LyWLb",photos:"App_photos__1Oj1p",photosCenter:"App_photosCenter__21amc",loading:"App_loading__32Vav",btnFilter:"App_btnFilter__3rIvw",active:"App_active__1o1ar"}},7:function(t,e,o){t.exports={btn_icon:"Photo_btn_icon__945Dc",photo:"Photo_photo__3LqJ-",userImg:"Photo_userImg__3sw0x",photoInfo:"Photo_photoInfo__cpYpo"}}},[[23,1,2]]]);
//# sourceMappingURL=main.fe6fe8e1.chunk.js.map