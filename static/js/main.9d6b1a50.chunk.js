(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{21:function(t,e,o){},24:function(t,e,o){"use strict";o.r(e);var n=o(3),a=o.n(n),c=o(12),i=o.n(c),r=(o(21),o(1)),s=o(15),l=o(11),p=o(14),u=o(10),h=o.n(u),d=o(13),O=o(16),j=o(4),b=function(t,e){if("GET_PHOTOS_BEGINS"===e.type)return Object(r.a)(Object(r.a)({},t),{},{isLoading:!0});if("GET_PHOTOS_SUCCESS"===e.type){var o,n=t.query,a=t.page;return n&&(o=e.payload.results.filter((function(e){return!t.photos.some((function(t){return t.id===e.id}))}))),n&&1===a?(console.log(o),Object(r.a)(Object(r.a)({},t),{},{all_photos:o,photos:o,isLoading:!1})):n?(console.log(o),Object(r.a)(Object(r.a)({},t),{},{all_photos:[].concat(Object(j.a)(t.photos),Object(j.a)(o)),photos:[].concat(Object(j.a)(t.photos),Object(j.a)(o)),isLoading:!1})):(o=e.payload.filter((function(e){return!t.photos.some((function(t){return t.id===e.id}))})),Object(r.a)(Object(r.a)({},t),{},{all_photos:[].concat(Object(j.a)(t.photos),Object(j.a)(o)),photos:[].concat(Object(j.a)(t.photos),Object(j.a)(o)),isLoading:!1}))}if("GET_PHOTOS_ERROR"===e.type)return console.log(e.payload),Object(r.a)(Object(r.a)({},t),{},{isLoading:!1});if("UPDATE_PAGE"===e.type)return!t.isLikedFilterOn&&!t.isLoading&&window.innerHeight+window.scrollY>=document.body.scrollHeight-2?Object(r.a)(Object(r.a)({},t),{},{page:t.page+1}):Object(r.a)({},t);if("UPDATE_QUERY"===e.type)return Object(r.a)(Object(r.a)({},t),{},{query:e.payload});if("SET_PAGE"===e.type)return Object(r.a)(Object(r.a)({},t),{},{page:1,isLikedFilterOn:!1});if("TOGGLE_LIKE"===e.type){var c,i=e.payload,s=function(){return t.all_photos.map((function(t){return t.id===i&&(t.liked_by_user=!t.liked_by_user,c=t),t}))};if(t.liked_photos.some((function(t){return t.id===i}))){var l=t.liked_photos.filter((function(t){return t.id!==i})),p=s();return t.isLikedFilterOn?Object(r.a)(Object(r.a)({},t),{},{all_photos:p,liked_photos:l,photos:l}):Object(r.a)(Object(r.a)({},t),{},{all_photos:p,liked_photos:l,photos:p})}var u=s();return Object(r.a)(Object(r.a)({},t),{},{all_photos:u,liked_photos:[].concat(Object(j.a)(t.liked_photos),[c]),photos:u})}if("DELETE_ITEM"===e.type){var h=t.all_photos.filter((function(t){return t.id!==e.payload}));return Object(r.a)(Object(r.a)({},t),{},{all_photos:Object(j.a)(h),photos:Object(j.a)(h)})}if("TOGGLE_LIKED_FILTER"===e.type)return t.isLikedFilterOn?Object(r.a)(Object(r.a)({},t),{},{isLikedFilterOn:!t.isLikedFilterOn,photos:t.all_photos}):Object(r.a)(Object(r.a)({},t),{},{isLikedFilterOn:!t.isLikedFilterOn,photos:t.liked_photos});throw new Error("no matching action type")},_="?client_id=".concat("4IEJj8E_8Fc7m7iJonOFKZpivFk89aBL6tJ4gtG0vJU"),f=o(2),m=a.a.createContext(),E={isLoading:!1,all_photos:[],photos:[],liked_photos:[],page:1,query:"",isLikedFilterOn:!1},y=function(t){var e=t.children,o=Object(n.useReducer)(b,E),a=Object(O.a)(o,2),c=a[0],i=a[1],s=c.page,l=c.query,p=function(){var t=Object(d.a)(h.a.mark((function t(){var e,o,n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:"GET_PHOTOS_BEGINS"}),o="&page=".concat(s),n="&query=".concat(l),e=l?"".concat("https://api.unsplash.com/search/photos/").concat(_).concat(o).concat(n):"".concat("https://api.unsplash.com/photos/").concat(_).concat(o),t.prev=4,t.next=7,fetch(e);case 7:return a=t.sent,t.next=10,a.json();case 10:c=t.sent,i({type:"GET_PHOTOS_SUCCESS",payload:c}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),i({type:"GET_PHOTOS_ERROR",payload:t.t0});case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){p()}),[s]);var u=function(){i({type:"UPDATE_PAGE"})};return Object(n.useEffect)((function(){return window.addEventListener("scroll",u),function(){window.removeEventListener("scroll",u)}}),[]),Object(f.jsx)(m.Provider,{value:Object(r.a)(Object(r.a)({},c),{},{updatePage:u,handleChange:function(t){i({type:"UPDATE_QUERY",payload:t.target.value})},handleSubmit:function(t){t.preventDefault(),i({type:"SET_PAGE"}),p()},handleLike:function(t){i({type:"TOGGLE_LIKE",payload:t})},handleLikedFilter:function(){i({type:"TOGGLE_LIKED_FILTER"})},handleDelete:function(t){console.log(t),i({type:"DELETE_ITEM",payload:t})}}),children:e})},L=function(){return Object(n.useContext)(m)},g=o(6),k=o.n(g),v=function(t){var e=t.id,o=t.urls.regular,n=t.alt_description,a=t.liked_by_user,c=t.user,i=c.name,r=c.portfolio_url,s=c.profile_image.medium,u=L(),h=u.isLikedFilterOn,d=u.handleLike,O=u.handleDelete,j={fontSize:"2rem"};return console.log(k.a),Object(f.jsxs)("article",{className:k.a.photo,children:[Object(f.jsx)("img",{src:o,alt:n}),Object(f.jsx)("button",{onClick:function(){return d(e)},className:"".concat(k.a.btnIcon," +' ' + ").concat(k.a.like),children:a?Object(f.jsx)(l.a,{style:j}):Object(f.jsx)(l.b,{style:j})}),Object(f.jsxs)("div",{className:k.a.photoInfo,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h4",{children:i}),Object(f.jsx)("a",{href:r,children:Object(f.jsx)("img",{src:s,alt:i,className:k.a.userImg})})]}),!h&&Object(f.jsx)("button",{onClick:function(){return O(e)},className:k.a.btnIcon,children:Object(f.jsx)(p.a,{style:{fontSize:"2rem",color:"white"}})})]})]})},x=o(5),T=o.n(x);var I=function(){var t=L(),e=t.photos,o=t.isLoading,n=t.query,a=t.handleChange,c=t.handleSubmit,i=t.handleLikedFilter,l=t.isLikedFilterOn;return Object(f.jsxs)("main",{children:[Object(f.jsxs)("section",{className:T.a.search,children:[Object(f.jsxs)("form",{className:T.a.searchForm,children:[Object(f.jsx)("input",{type:"text",placeholder:"\u043f\u043e\u0438\u0441\u043a",className:T.a.formInput,value:n,onChange:a}),Object(f.jsx)("button",{type:"submit",className:T.a.submitBtn,onClick:c,children:Object(f.jsx)(s.a,{})})]}),Object(f.jsx)("button",{onClick:i,className:T.a.btnFilter,id:l?T.a.active:void 0,children:"\u041c\u043e\u044f \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f"})]}),Object(f.jsxs)("section",{className:T.a.photos,children:[Object(f.jsx)("div",{className:T.a.photosCenter,children:e.map((function(t){return Object(f.jsx)(v,Object(r.a)({},t),t.id)}))}),o&&Object(f.jsx)("h2",{className:T.a.loading,children:"Loading..."})]})]})};i.a.render(Object(f.jsx)(y,{children:Object(f.jsx)(I,{})}),document.getElementById("root"))},5:function(t,e,o){t.exports={search:"App_search__268Ay",searchForm:"App_searchForm__2qUzJ",formInput:"App_formInput__2fs6k",submitBtn:"App_submitBtn__LyWLb",photos:"App_photos__1Oj1p",photosCenter:"App_photosCenter__21amc",loading:"App_loading__32Vav",btnFilter:"App_btnFilter__3rIvw",active:"App_active__1o1ar"}},6:function(t,e,o){t.exports={photo:"Photo_photo__3LqJ-",btnIcon:"Photo_btnIcon__Lrbkc",like:"Photo_like__DlDgv",userImg:"Photo_userImg__3sw0x",photoInfo:"Photo_photoInfo__cpYpo"}}},[[24,1,2]]]);
//# sourceMappingURL=main.9d6b1a50.chunk.js.map